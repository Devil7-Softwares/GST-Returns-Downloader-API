<html>
<head>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://static.gst.gov.in/uiassets/javascripts/fwk/pdfmake.min.1.1.js"></script>
    <script src="https://static.gst.gov.in/uiassets/javascripts/fwk/vfs_fonts.js"></script>


    <script type="text/javascript">
        // #region General
        /**
         * Dimmer show/hide function. See https://static.gst.gov.in/uiassets/js/common/common1.2.js
         * */
        $.fn.blockPage = function (type) { };

        /**
         * Main context variable used in https://static.gst.gov.in/uiassets/js/common/common1.2.js.
         *
         * Here created a dummy variable with necessary placeholders.
         * */
        var $scope = {
            disable_btn: function () { }
        };

        /**
         *
         * */
        var shareData = {};
        // #endregion

        // #region Polyfils
        var angular = {};
        angular.forEach = function (value, callback) {
            if ($.isArray(value)) {
                $.each(value, function (key, value) { callback(value, key); });
            } else {
                for (var property in value) {
                    if (value.hasOwnProperty(property))
                        callback(value[property], property);
                }
            }
        };
        angular.equals = function (x, y) {
            if (x === y) {
                return true; // if both x and y are null or undefined and exactly the same
            } else if (!(x instanceof Object) || !(y instanceof Object)) {
                return false; // if they are not strictly equal, they both need to be Objects
            } else if (x.constructor !== y.constructor) {
                // they must have the exact same prototype chain, the closest we can do is
                // test their constructor.
                return false;
            } else {
                for (var p in x) {
                    if (!x.hasOwnProperty(p)) {
                        continue; // other properties were tested using x.constructor === y.constructor
                    }
                    if (!y.hasOwnProperty(p)) {
                        return false; // allows to compare x[ p ] and y[ p ] when set to undefined
                    }
                    if (x[p] === y[p]) {
                        continue; // if they have the same strict value or identity then they are equal
                    }
                    if (typeof (x[p]) !== 'object') {
                        return false; // Numbers, Strings, Functions, Booleans must be strictly equal
                    }
                    if (!deepEquals(x[p], y[p])) {
                        return false;
                    }
                }
                for (var p in y) {
                    if (y.hasOwnProperty(p) && !x.hasOwnProperty(p)) {
                        return false;
                    }
                }
                return true;
            }
        };
        // #endregion

        // #region GSTR1
        /**
         * Generates GSTR1 Return PDF (See https://return.gst.gov.in/returns/auth/gstr1)
         *
         * This function emulates $scope.getSummary and $scope.genratepdf functions from https://static.gst.gov.in/uiassets/js/common/common1.2.js.
         *
         * @param response      Response json from "https://return.gst.gov.in/returns/auth/api/gstr1/summary?rtn_prd=<rtn_prd>" [<JSON>]
         * @param status        Return status [FIL/NF]
         * @param gstin         GSTIN Number
         * @param rtn_prd       Return period [<MMYYYY>]
         * @param finyr         Financial period [<YYYY-YY>]
         * @param retprd        Month of return
         * @param bus_name      Registered name
         * @param trade_name    Trade name
         * @param gt            Aggregate turnover in preceding financial year
         * @param cur_gt        Aggregate turnover apr to june 2019 financial year
         */
        function generateGSTR1PDF(response, status, gstin, rtn_prd, finyr, retprd, bus_name, trade_name, gt, cur_gt) {
            response = JSON.parse(response);

            $scope.fil_stat = status;
            shareData.rtn_prd = rtn_prd;

            var main_page_gstin = gstin;
            var pdfname = 'GSTR1_' + gstin + '_' + rtn_prd;

            // #region $scope.getSummary
            $scope.gstr1SumData = response.data;
            $scope.summaryTime = response.data.time;
            $scope.sumTimeFlag = true;
            $scope.summaryFlag = false;
            $scope.summaryMsg = "";
            $scope.sumryData = $scope.gstr1SumData.sec_sum;
            for (var i = 0; i < $scope.sumryData.length; i++) {
                if ($scope.sumryData[i].sec_nm == 'B2B') {
                    shareData.sec_name = $scope.sumryData[i].sec_nm;
                    pdfb2b = $scope.b2bdat = $scope.sumryData[i];
                } else if ($scope.sumryData[i].sec_nm == 'B2BA') {
                    pdfb2ba = $scope.b2badat = $scope.sumryData[i];
                } else if ($scope.sumryData[i].sec_nm == 'CDNRA') {
                    pdfcdnra = $scope.cdnadat = $scope.sumryData[i];
                } else if ($scope.sumryData[i].sec_nm == 'CDNR') {
                    pdfcdnr = $scope.cdnrdat = $scope.sumryData[i];
                } else if ($scope.sumryData[i].sec_nm == 'CDNUR') {
                    pdfcdnur = $scope.cdnurdat = $scope.sumryData[i];
                } else if ($scope.sumryData[i].sec_nm == 'CDNURA') {
                    pdfcdnura = $scope.cdnuradat = $scope.sumryData[i];
                } else if ($scope.sumryData[i].sec_nm == 'B2CLA') {
                    pdfb2cla = $scope.b2cladat = $scope.sumryData[i];
                } else if ($scope.sumryData[i].sec_nm == 'B2CL') {
                    pdfb2cl = $scope.b2cldat = $scope.sumryData[i];
                } else if ($scope.sumryData[i].sec_nm == 'B2CSA') {
                    pdfb2csa = $scope.b2csadat = $scope.sumryData[i];
                } else if ($scope.sumryData[i].sec_nm == 'B2CS') {
                    pdfb2cs = $scope.b2csdat = $scope.sumryData[i];
                } else if ($scope.sumryData[i].sec_nm == 'NIL') {
                    pdfnil = $scope.nildat = $scope.sumryData[i];
                } else if ($scope.sumryData[i].sec_nm == 'EXP') {
                    pdfexp = $scope.expdat = $scope.sumryData[i];
                }
                /*   else if ($scope.sumryData[i].sec_nm == 'EXPWP') {
                    $scope.expwdat = $scope.sumryData[i];
                }  */
                else if ($scope.sumryData[i].sec_nm == 'EXPA') {
                    pdfexpa = $scope.expadat = $scope.sumryData[i];
                }
                /* else if ($scope.sumryData[i].sec_nm == 'EXPWPA') {
                    $scope.expawdat = $scope.sumryData[i];
                } */
                else if ($scope.sumryData[i].sec_nm == 'ATA') {
                    pdfata = $scope.atadat = $scope.sumryData[i];
                } else if ($scope.sumryData[i].sec_nm == 'TXPD') {
                    pdftxpd = $scope.txpdat = $scope.sumryData[i];
                } else if ($scope.sumryData[i].sec_nm == 'TXPDA') {
                    pdftxpda = $scope.txpadat = $scope.sumryData[i];
                } else if ($scope.sumryData[i].sec_nm == 'AT') {
                    pdfat = $scope.attdat = $scope.sumryData[i];
                } else if ($scope.sumryData[i].sec_nm == 'HSN') {
                    pdfhsn = $scope.hsndat = $scope.sumryData[i];
                } else if ($scope.sumryData[i].sec_nm == 'DOC_ISSUE') {
                    pdfdoc = $scope.docdat = $scope.sumryData[i];
                }
            }
            $scope.disable_btn();
            $().blockPage(false);
            // #endregion

            // #region $scope.genratepdf
            var text = "DRAFT";
            if (status === 'FRZ' || status === 'FIL') {
                var text = "FINAL"
            }
            var dd = {
                pageSize: 'A4',
                pageOrientation: 'landscape',
                pageMargin: [40, 60, 40, 60],
                watermark: { text: text, color: 'black', opacity: 0.3, bold: true, italics: false, fontSize: 20 },
                content: [
                    {
                        text: 'Form GSTR-1',
                        style: 'header'
                    },
                    {
                        text: '[See rule (59(1)]',
                        style: 'rule'
                    },

                    {
                        text: 'Details of outward supplies of goods or services',
                        style: 'center'
                    },
                    {
                        style: 'retprd',
                        table: {
                            widths: ['30%', 'auto'],
                            body: [
                                ['Year', finyr],
                                ['Month', retprd],

                            ]
                        }
                    },
                    {
                        style: 'tableExample',
                        table: {
                            widths: ['65%', 'auto'],
                            body: [
                                ['1. GSTIN', main_page_gstin || '-'],
                                ['2(a). Legal name of the registered person', bus_name || '-'],
                                ['2(b). Trade name, if any', trade_name || '-'],
                                ['3(a). Aggregate Turnover in the preceding Financial Year', gt || '-'],
                                ['3(b). Aggregate Turnover - April to June, 2017 ', cur_gt || '-'],
                            ]
                        }
                    },
                    {
                        text: '4A, 4B, 4C, 6B, 6C - B2B Invoices',
                        style: 'subheader'
                    },

                    {
                        style: 'tableExample',
                        table: {
                            body: [
                                ['No. of Records', 'Total Invoice value', 'Total Taxable value', 'Total Integrated Tax', 'Total Central Tax', 'Total State/UT  Tax', 'Total Cess'],
                                [pdfb2b.ttl_rec, pdfb2b.ttl_val, pdfb2b.ttl_tax, pdfb2b.ttl_igst, pdfb2b.ttl_cgst, pdfb2b.ttl_sgst, pdfb2b.ttl_cess]
                            ]
                        }
                    }, {
                        text: '5A, 5B - B2C (Large) Invoices',
                        style: 'subheader'
                    },

                    {
                        style: 'tableExample',
                        table: {
                            body: [
                                ['No. of Records', 'Total Invoice value', 'Total Taxable value', 'Total Integrated Tax', 'Total Cess'],
                                [pdfb2cl.ttl_rec, pdfb2cl.ttl_val, pdfb2cl.ttl_tax, pdfb2cl.ttl_igst, pdfb2cl.ttl_cess]
                            ]
                        }
                    }, {
                        text: '9B - Credit / Debit Notes (Registered)',
                        style: 'subheader'
                    },

                    {
                        style: 'tableExample',
                        table: {
                            body: [
                                ['No. of Records', 'Total Invoice value', 'Total Taxable value', 'Total Integrated Tax', 'Total Central Tax', 'Total State/UT  Tax', 'Total Cess'],
                                [pdfcdnr.ttl_rec, pdfcdnr.ttl_val, pdfcdnr.ttl_tax, pdfcdnr.ttl_igst, pdfcdnr.ttl_cgst, pdfcdnr.ttl_sgst, pdfcdnr.ttl_cess]
                            ]
                        }
                    }, {
                        text: '9B - Credit / Debit Notes (Unregistered)',
                        style: 'subheader'
                    },

                    {
                        style: 'tableExample',
                        table: {
                            body: [
                                ['No. of Records', 'Total Invoice value', 'Total Taxable value', 'Total Integrated Tax', 'Total Cess'],
                                [pdfcdnur.ttl_rec, pdfcdnur.ttl_val, pdfcdnur.ttl_tax, pdfcdnur.ttl_igst, pdfcdnur.ttl_cess]
                            ]
                        }
                    }, {
                        text: '6A - Exports Invoices',
                        style: 'subheader'
                    },

                    {
                        style: 'tableExample',
                        table: {
                            body: [
                                ['No. of Records', 'Total Invoice value', 'Total Taxable value', 'Total Integrated Tax'],
                                [pdfexp.ttl_rec, pdfexp.ttl_val, pdfexp.ttl_tax, pdfexp.ttl_igst]
                            ]
                        }
                    }, {
                        text: '7 - B2C (Others)',
                        style: 'subheader'
                    },

                    {
                        style: 'tableExample',
                        table: {
                            body: [
                                ['No. of Records', 'Total Invoice value', 'Total Taxable value', 'Total Integrated Tax', 'Total Central Tax', 'Total State/UT  Tax', 'Total Cess'],
                                [pdfb2cs.ttl_rec, pdfb2cs.ttl_val, pdfb2cs.ttl_tax, pdfb2cs.ttl_igst, pdfb2cs.ttl_cgst, pdfb2cs.ttl_sgst, pdfb2cs.ttl_cess]
                            ]
                        }
                    }, {
                        text: '8 - Nil rated, exempted and non GST outward supplies',
                        style: 'subheader'
                    },

                    {
                        style: 'tableExample',
                        table: {
                            body: [
                                ['No. of Records', 'Total Nil amount', 'Total Exempted amount', 'Total Non-GST Amount'],
                                [pdfnil.ttl_rec, pdfnil.ttl_nilsup_amt, pdfnil.ttl_expt_amt, pdfnil.ttl_ngsup_amt]
                            ]
                        }
                    }, {
                        text: '11A(1), 11A(2) - Tax Liability (Advances Received)',
                        style: 'subheader'
                    },

                    {
                        style: 'tableExample',
                        table: {
                            body: [
                                ['No. of Records', 'Total Invoice value', 'Total Taxable value', 'Total Integrated Tax', 'Total Central Tax', 'Total State/UT  Tax', 'Total Cess'],
                                [pdfat.ttl_rec, pdfat.ttl_val, pdfat.ttl_tax, pdfat.ttl_igst, pdfat.ttl_cgst, pdfat.ttl_sgst, pdfat.ttl_cess]
                            ]
                        }
                    },
                    {
                        text: '11B(1), 11B(2) - Adjustment of Advances', pageBreak: 'before',
                        style: 'subheader'
                    },

                    {
                        style: 'tableExample',
                        table: {
                            body: [
                                ['No. of Records', 'Total Invoice value', 'Total Taxable value', 'Total Integrated Tax', 'Total Central Tax', 'Total State/UT  Tax', 'Total Cess'],
                                [pdftxpd.ttl_rec, pdftxpd.ttl_val, pdftxpd.ttl_tax, pdftxpd.ttl_igst, pdftxpd.ttl_cgst, pdftxpd.ttl_sgst, pdftxpd.ttl_cess]
                            ]
                        }
                    },
                    {
                        text: '12 - HSN-wise summary of outward supplies',
                        style: 'subheader'
                    },

                    {
                        style: 'tableExample',
                        table: {
                            body: [
                                ['No. of Records', 'Total Invoice value', 'Total Taxable value', 'Total Integrated Tax', 'Total Central Tax', 'Total State/UT  Tax', 'Total Cess'],
                                [pdfhsn.ttl_rec, pdfhsn.ttl_val, pdfhsn.ttl_tax, pdfhsn.ttl_igst, pdfhsn.ttl_cgst, pdfhsn.ttl_sgst, pdfhsn.ttl_cess]
                            ]
                        }
                    },
                    {
                        text: '13 - Documents Issued',
                        style: 'subheader'
                    },

                    {
                        style: 'tableExample',
                        table: {
                            body: [
                                ['No. of Records', 'Documents Issued', 'Documents Cancelled', 'Net issued Documents'],
                                [$scope.docdat.ttl_rec, $scope.docdat.ttl_doc_issued, $scope.docdat.ttl_doc_cancelled, $scope.docdat.net_doc_issued]
                            ]
                        }
                    },
                    {
                        text: '9A - Amended B2B Invoices',
                        style: 'subheader'
                    },

                    {
                        style: 'tableExample',
                        table: {
                            body: [
                                ['No. of Records', 'Total Invoice value', 'Total Taxable value', 'Total Integrated Tax', 'Total Central Tax', 'Total State/UT  Tax', 'Total Cess'],
                                [pdfb2ba.ttl_rec, pdfb2ba.ttl_val, pdfb2ba.ttl_tax, pdfb2ba.ttl_igst, pdfb2ba.ttl_cgst, pdfb2ba.ttl_sgst, pdfb2ba.ttl_cess]
                            ]
                        }
                    },
                    {
                        text: '9A - Amended B2C (Large) Invoices',
                        style: 'subheader'
                    },

                    {
                        style: 'tableExample',
                        table: {
                            body: [
                                ['No. of Records', 'Total Invoice value', 'Total Taxable value', 'Total Integrated Tax', 'Total Cess'],
                                [pdfb2cla.ttl_rec, pdfb2cla.ttl_val, pdfb2cla.ttl_tax, pdfb2cla.ttl_igst, pdfb2cla.ttl_cess]
                            ]
                        }
                    },
                    {
                        text: '9C - Amended Credit/Debit Notes (Registered)', pageBreak: 'before',
                        style: 'subheader'
                    },

                    {
                        style: 'tableExample',
                        table: {
                            body: [
                                ['No. of Records', 'Total Invoice value', 'Total Taxable value', 'Total Integrated Tax', 'Total Central Tax', 'Total State/UT  Tax', 'Total Cess'],
                                [pdfcdnra.ttl_rec, pdfcdnra.ttl_val, pdfcdnra.ttl_tax, pdfcdnra.ttl_igst, pdfcdnra.ttl_cgst, pdfcdnra.ttl_sgst, pdfcdnra.ttl_cess]
                            ]
                        }
                    },
                    {
                        text: '9C - Amended Credit/Debit Notes (Unregistered)',
                        style: 'subheader'
                    },

                    {
                        style: 'tableExample',
                        table: {
                            body: [
                                ['No. of Records', 'Total Invoice value', 'Total Taxable value', 'Total Integrated Tax', 'Total Cess'],
                                [pdfcdnura.ttl_rec, pdfcdnura.ttl_val, pdfcdnura.ttl_tax, pdfcdnura.ttl_igst, pdfcdnura.ttl_cess]
                            ]
                        }
                    },
                    {
                        text: '9A - Amended Exports Invoices',
                        style: 'subheader'
                    },

                    {
                        style: 'tableExample',
                        table: {
                            body: [
                                ['No. of Records', 'Total Invoice value', 'Total Taxable value', 'Total Integrated Tax'],
                                [pdfexpa.ttl_rec, pdfexpa.ttl_val, pdfexpa.ttl_tax, pdfexpa.ttl_igst]
                            ]
                        }
                    },
                    {
                        text: '10 - Amended B2C(Others)',
                        style: 'subheader'
                    },

                    {
                        style: 'tableExample',
                        table: {
                            body: [
                                ['No. of Records', 'Total Invoice value', 'Total Taxable value', 'Total Integrated Tax', 'Total Central Tax', 'Total State/UT  Tax', 'Total Cess'],
                                [pdfb2csa.ttl_rec, pdfb2csa.ttl_val, pdfb2csa.ttl_tax, pdfb2csa.ttl_igst, pdfb2csa.ttl_cgst, pdfb2csa.ttl_sgst, pdfb2csa.ttl_cess]
                            ]
                        }
                    },
                    {
                        text: '11A - Amended Tax Liability (Advance Received)', pageBreak: 'before',
                        style: 'subheader'
                    },

                    {
                        style: 'tableExample',
                        table: {
                            body: [
                                ['No. of Records', 'Total Invoice value', 'Total Taxable value', 'Total Integrated Tax', 'Total Central Tax', 'Total State/UT  Tax', 'Total Cess'],
                                [pdfata.ttl_rec, pdfata.ttl_val, pdfata.ttl_tax, pdfata.ttl_igst, pdfata.ttl_cgst, pdfata.ttl_sgst, pdfata.ttl_cess]
                            ]
                        }
                    },
                    {
                        text: '11B - Amendment of Adjustment of Advances',
                        style: 'subheader'
                    },

                    {
                        style: 'tableExample',
                        table: {
                            body: [
                                ['No. of Records', 'Total Invoice value', 'Total Taxable value', 'Total Integrated Tax', 'Total Central Tax', 'Total State/UT  Tax', 'Total Cess'],
                                [pdftxpda.ttl_rec, pdftxpda.ttl_val, pdftxpda.ttl_tax, pdftxpda.ttl_igst, pdftxpda.ttl_cgst, pdftxpda.ttl_sgst, pdftxpda.ttl_cess]
                            ]
                        }
                    }
                ],
                styles: {
                    header: {
                        fontSize: 18,
                        bold: true,
                        margin: [300, 0, 0, 10]
                    },
                    subheader: {
                        fontSize: 16,
                        bold: true,
                        margin: [0, 10, 0, 5]
                    },
                    tableExample: {
                        margin: [0, 5, 0, 15]
                    },
                    retprd: {
                        margin: [470, 0, 0, 10]
                    },
                    center: {
                        margin: [220, 0, 0, 10]
                    },
                    tableHeader: {
                        bold: true,
                        fontSize: 13,
                        color: 'black'
                    },
                    rule: {
                        margin: [315, 0, 0, 10]
                    }
                }

            }
            // #endregion

            // Instead of downloaing file, write file to console as base64 so we can get it from our headless browser.
            // NOTE: Make sure to remove 'pdfMake.createPdf(dd).download(pdfname);' line from $scope.genratepdf function when updating.
            pdfMake.createPdf(dd).getBase64((data) => {
                console.log("PDF:" + pdfname + ":" + data);
            });
        }
        // #endregion

        // #region GSTR3B
        /**
         * Generates GSTR3B PDF (see https://return.gst.gov.in/returns/auth/gstr3b)
         * 
         * This function emulates $scope.getGSTR3BSummary and $scope.downloadPdf functions from https://returnstatic.gst.gov.in/uiassets/js/returns/gstr3bctrl.js.
         * 
         * @param rtn_prd               Return period [<MMYYYY>]
         * @param status                Return status [FIL/NF]
         * @param gstr3bSummaryData     Response json from "https://return.gst.gov.in/returns/auth/api/gstr3b/summary?rtn_prd=<rtn_prd>" [<JSON>]
         * @param taxPayableData        Response json from "https://return.gst.gov.in//returns/auth/api/gstr3b/taxpayble?rtn_prd=<rtn_prd>" [<JSON>]
         * @param formDetailsData       Response json from "https://return.gst.gov.in/returns/auth/api/formdetails?rtn_prd=<rtn_prd>&rtn_typ=GSTR3B" [<JSON>]
         */
        function generateGSTR3BPDF(rtn_prd, status, gstr3bSummaryData, taxPayableData, formDetailsData) {
            shareData.rtn_prd = rtn_prd;
            shareData.gstr3bSummary = (typeof gstr3bSummaryData == "object" ? gstr3bSummaryData : JSON.parse(gstr3bSummaryData)).data;

            var filing_stat = status;

            var response = typeof formDetailsData == "object" ? formDetailsData : JSON.parse(formDetailsData);
            var formDetails = response.data;
            // #region Form Details
            $scope.user = response.data.user;
            $scope.main_page_gstin = shareData.gstin = formDetails.gstin;
            $scope.filing = shareData.fil_stat = formDetails.status;
            shareData.approval_dt = formDetails.apprv_dt;
            $scope.retprd = shareData.retprd = formDetails.fm;
            $scope.bus_name = shareData.business_name = formDetails.ln;
            $scope.finyr = shareData.disyear = formDetails.fy;
            $scope.due_dt = shareData.due_date = formDetails.due_dt;
            $scope.evc_chk = shareData.evc_chk = formDetails.evc_chk;
            if (formDetails.status !== "NF" && formDetails.status !== "ER") {
                $scope.disableAll3BF = true;
                $scope.disable3BSub = true;
            }
            if (formDetails.status != "NF") {
                $scope.showtiles = true;
            }
            // #endregion

            // #region $scope.calculateSummary
            $scope.totalItx_iosup = 0.0, $scope.totalCtx_iosup = 0.0, $scope.totalStx_iosup = 0.0, $scope.totalCs_iosup = 0.0;
            $scope.totalTxVal_intersup = 0.0, $scope.totalItx_intersup = 0.0;
            $scope.totalItx_elgITC = 0.0, $scope.totalCtx_elgITC = 0.0, $scope.totalStx_elgITC = 0.0, $scope.totalCs_elgITC = 0.0;
            $scope.totalTxInterSS_inwsup = 0.0, $scope.totalIntraSS_inwsup = 0.0;
            $scope.totalItx_interestLtfee = 0.0, $scope.totalCtx_interestLtfee = 0.0, $scope.totalStx_interestLtfee = 0.0, $scope.totalCs_interestLtfee = 0.0;
            $scope.totalTxlib_pmt = 0.0, $scope.totalCashpd_pmt = 0.0, $scope.totalITCpd_pmt = 0.0;
            $scope.totalItx_tdstcs = 0.0, $scope.totalCtx_tdstcs = 0.0, $scope.totalStx_tdstcs = 0.0;
            //3.1
            if (shareData.gstr3bSummary.sup_details) {
                $scope.totalItx_iosup = parseFloat(shareData.gstr3bSummary.sup_details.osup_det.iamt)
                    + parseFloat(shareData.gstr3bSummary.sup_details.osup_zero.iamt)
                    + parseFloat(shareData.gstr3bSummary.sup_details.isup_rev.iamt);
                $scope.totalCtx_iosup = parseFloat(shareData.gstr3bSummary.sup_details.osup_det.camt)
                    + parseFloat(shareData.gstr3bSummary.sup_details.isup_rev.camt);
                $scope.totalStx_iosup = parseFloat(shareData.gstr3bSummary.sup_details.osup_det.samt)
                    + parseFloat(shareData.gstr3bSummary.sup_details.isup_rev.samt);
                $scope.totalCs_iosup = parseFloat(shareData.gstr3bSummary.sup_details.osup_det.csamt)
                    + parseFloat(shareData.gstr3bSummary.sup_details.osup_zero.csamt)
                    + parseFloat(shareData.gstr3bSummary.sup_details.isup_rev.csamt);
            }

            //3.2
            if (shareData.gstr3bSummary.inter_sup) {
                $scope.totalTxVal_intersup = 0.0, $scope.totalItx_intersup = 0.0;
                angular.forEach(shareData.gstr3bSummary.inter_sup, function (value, key) {
                    //console.log(key + ': ' + value);
                    if (!value.empty) {
                        angular.forEach(value, function (val, label) {
                            $scope.totalTxVal_intersup = $scope.totalTxVal_intersup + parseFloat(val.txval);
                            $scope.totalItx_intersup = $scope.totalItx_intersup + parseFloat(val.iamt);
                        });
                    }
                });
            }

            //4
            $scope.totalItx_elgITC = 0.0, $scope.totalCtx_elgITC = 0.0, $scope.totalStx_elgITC = 0.0, $scope.totalCs_elgITC = 0.0;
            angular.forEach(shareData.gstr3bSummary.itc_elg, function (val, key) {
                if (angular.equals(key, 'itc_avl')) {
                    angular.forEach(val, function (obj) {
                        $scope.totalItx_elgITC += parseFloat(obj.iamt);
                        $scope.totalCtx_elgITC += parseFloat(obj.camt);
                        $scope.totalStx_elgITC += parseFloat(obj.samt);
                        $scope.totalCs_elgITC += parseFloat(obj.csamt);
                    });
                } else if (angular.equals(key, 'itc_rev')) {
                    angular.forEach(val, function (obj) {
                        $scope.totalItx_elgITC -= parseFloat(obj.iamt);
                        $scope.totalCtx_elgITC -= parseFloat(obj.camt);
                        $scope.totalStx_elgITC -= parseFloat(obj.samt);
                        $scope.totalCs_elgITC -= parseFloat(obj.csamt);
                    });
                }
            });

            //5
            if (shareData.gstr3bSummary.inward_sup) {
                $scope.totalTxInterSS_inwsup = 0.0, $scope.totalIntraSS_inwsup = 0.0;
                angular.forEach(shareData.gstr3bSummary.inward_sup.isup_details, function (obj) {
                    $scope.totalTxInterSS_inwsup += parseFloat(obj.inter);
                    $scope.totalIntraSS_inwsup += parseFloat(obj.intra);
                });
            }

            //5.1
            if (shareData.gstr3bSummary.intr_ltfee) {
                var intr_iamt = 0.0, intr_camt = 0.0, intr_samt = 0.0, intr_csamt = 0.0, fee_camt = 0.0, fee_samt = 0.0;
                if (shareData.gstr3bSummary.intr_ltfee.intr_details) {
                    intr_iamt = parseFloat(shareData.gstr3bSummary.intr_ltfee.intr_details.iamt || 0.0);
                    intr_camt = parseFloat(shareData.gstr3bSummary.intr_ltfee.intr_details.camt || 0.0);
                    intr_samt = parseFloat(shareData.gstr3bSummary.intr_ltfee.intr_details.samt || 0.0);
                    intr_csamt = parseFloat(shareData.gstr3bSummary.intr_ltfee.intr_details.csamt || 0.0);
                }
                if (shareData.gstr3bSummary.intr_ltfee.ltfee_details) {
                    fee_camt = parseFloat(shareData.gstr3bSummary.intr_ltfee.ltfee_details.camt || 0.0);
                    fee_samt = parseFloat(shareData.gstr3bSummary.intr_ltfee.ltfee_details.samt || 0.0);
                }

                $scope.totalItx_interestLtfee = intr_iamt;
                $scope.totalCtx_interestLtfee = intr_camt + fee_camt;
                $scope.totalStx_interestLtfee = intr_samt + fee_samt;
                $scope.totalCs_interestLtfee = intr_csamt;
            }

            //6
            $scope.totalTxlib_pmt = 0.0;
            $scope.totalCashpd_pmt = 0.0;
            $scope.totalITCpd_pmt = 0.0;
            if (shareData.gstr3bSummary.tt_val) {
                $scope.totalTxlib_pmt = parseFloat(shareData.gstr3bSummary.tt_val.tt_pay);
                $scope.totalCashpd_pmt = parseFloat(shareData.gstr3bSummary.tt_val.tt_csh_pd);
                $scope.totalITCpd_pmt = parseFloat(shareData.gstr3bSummary.tt_val.tt_itc_pd);
            }
            // #endregion

            // #region $scope.downloadPdf
            var status = filing_stat;
            if (!status) {
                status = $scope.filing;
            }

            $scope.osupTaxvl = 0.0,
                $scope.osupIamt = 0.0,
                $scope.osupCamt = 0.0,
                $scope.osupSamt = 0.0,
                $scope.osupCsamt = 0.0,
                $scope.osupZeroRatedTxval = 0.0,
                $scope.osupZeroRatedIamt = 0.0,
                $scope.osupZeroRatedCsamt = 0.0,
                $scope.osupNilTxval = 0.0,
                $scope.isupRevTxval = 0.0,
                $scope.isupRevIamt = 0.0,
                $scope.isupRevCamt = 0.0,
                $scope.isupRevSamt = 0.0,
                $scope.isupRevCsamt = 0.0,
                $scope.isupNongstTxval = 0.0,
                $scope.intrestIamt = 0.0,
                $scope.intrestCamt = 0.0,
                $scope.intrestSamt = 0.0,
                $scope.intrestCsamt = 0.0,
                $scope.lateFeeCamt = 0.0,
                $scope.lateFeeSamt = 0.0,
                $scope.interSupUnregTotalTax = 0.0,
                $scope.interSupUnregIntTax = 0.0,
                $scope.interSupCompTotalTax = 0.0,
                $scope.interSupCompIntTax = 0.0,
                $scope.intersupUINTotalTax = 0.0,
                $scope.intersupUINIntTax = 0.0,
                $scope.avITCIamt = 0.0,
                $scope.avITCCamt = 0.0,
                $scope.avITCSamt = 0.0,
                $scope.avITCCsamt = 0.0,
                $scope.revITCIamt = 0.0,
                $scope.revITCCamt = 0.0,
                $scope.revITCSamt = 0.0,
                $scope.revITCCsamt = 0.0,
                $scope.netITCIamt = 0.0,
                $scope.netITCCamt = 0.0,
                $scope.netITCSamt = 0.0,
                $scope.netITCCsamt = 0.0,
                $scope.inlgITCIamt = 0.0,
                $scope.inlgITCCamt = 0.0,
                $scope.inlgITCSamt = 0.0,
                $scope.inlgITCCsamt = 0.0,
                $scope.insupCompInter = 0.0,
                $scope.insupCompIntra = 0.0,
                $scope.insupNonGstInter = 0.0,
                $scope.insupNonGstIntra = 0.0,
                $scope.taxPaidItcIgst_Igst_amt = 0.0,
                $scope.taxPaidItcIgst_Cgst_amt = 0.0,
                $scope.taxPaidItcIgst_Sgst_amt = 0.0,
                $scope.taxPaidCashNonRevigsttx = 0.0,
                $scope.taxPaidCashNonRevigstintr = 0.0,
                $scope.taxPaidItcCgst_Igst_amt = 0.0,
                $scope.taxPaidItcCgst_Cgst_amt = 0.0,
                $scope.taxPaidCashNonRevcgsttx = 0.0,
                $scope.taxPaidCashNonRevcgstintr = 0.0,
                $scope.taxPaidCashNonRevcgstfee = 0.0,
                $scope.taxPaidItcSgst_Igst_amt = 0.0,
                $scope.taxPaidItcSgst_Sgst_amt = 0.0,
                $scope.taxPaidCashNonRevsgsttx = 0.0,
                $scope.taxPaidCashNonRevsgstintr = 0.0,
                $scope.taxPaidCashNonRevsgstfee = 0.0,
                $scope.taxPaidItcCess_Cess_amt = 0.0,
                $scope.taxPaidCashNonRevcesstx = 0.0,
                $scope.taxPaidCashNonRevcessintr = 0.0,
                $scope.taxPaidCashRevigsttx = 0.0,
                $scope.taxPaidCashRevcgsttx = 0.0,
                $scope.taxPaidCashRevsgsttx = 0.0,
                $scope.taxPaidCashRevcesstx = 0.0;
            $scope.othRev_iamt = 0.0;
            $scope.othRev_camt = 0.0;
            $scope.othRev_samt = 0.0;
            $scope.othRev_csamt = 0.0;
            $scope.revrs_iamt = 0.0;
            $scope.revrs_camt = 0.0;
            $scope.revrs_samt = 0.0;
            $scope.revrs_csamt = 0.0;
            //table 3.1
            if (shareData.gstr3bSummary.sup_details) {
                if (shareData.gstr3bSummary.sup_details.osup_det) {
                    $scope.osupTaxvl = shareData.gstr3bSummary.sup_details.osup_det.txval;
                }
                if (shareData.gstr3bSummary.sup_details.osup_det) {
                    $scope.osupIamt = shareData.gstr3bSummary.sup_details.osup_det.iamt;
                }
                if (shareData.gstr3bSummary.sup_details.osup_det) {
                    $scope.osupCamt = shareData.gstr3bSummary.sup_details.osup_det.camt;
                }
                if (shareData.gstr3bSummary.sup_details.osup_det) {
                    $scope.osupSamt = shareData.gstr3bSummary.sup_details.osup_det.samt;
                }
                if (shareData.gstr3bSummary.sup_details.osup_det) {
                    $scope.osupCsamt = shareData.gstr3bSummary.sup_details.osup_det.csamt;
                }
                if (shareData.gstr3bSummary.sup_details.osup_zero) {
                    $scope.osupZeroRatedTxval = shareData.gstr3bSummary.sup_details.osup_zero.txval;
                }
                if (shareData.gstr3bSummary.sup_details.osup_zero) {
                    $scope.osupZeroRatedIamt = shareData.gstr3bSummary.sup_details.osup_zero.iamt;
                }
                if (shareData.gstr3bSummary.sup_details.osup_zero) {
                    $scope.osupZeroRatedCsamt = shareData.gstr3bSummary.sup_details.osup_zero.csamt;
                }
                if (shareData.gstr3bSummary.sup_details.osup_nil_exmp) {
                    $scope.osupNilTxval = shareData.gstr3bSummary.sup_details.osup_nil_exmp.txval;
                }
                if (shareData.gstr3bSummary.sup_details.isup_rev) {
                    $scope.isupRevTxval = shareData.gstr3bSummary.sup_details.isup_rev.txval;
                }
                if (shareData.gstr3bSummary.sup_details.isup_rev) {
                    $scope.isupRevIamt = shareData.gstr3bSummary.sup_details.isup_rev.iamt;
                }
                if (shareData.gstr3bSummary.sup_details.isup_rev) {
                    $scope.isupRevCamt = shareData.gstr3bSummary.sup_details.isup_rev.camt;
                }
                if (shareData.gstr3bSummary.sup_details.isup_rev) {
                    $scope.isupRevSamt = shareData.gstr3bSummary.sup_details.isup_rev.samt;
                }
                if (shareData.gstr3bSummary.sup_details.isup_rev) {
                    $scope.isupRevCsamt = shareData.gstr3bSummary.sup_details.isup_rev.csamt;
                }
                if (shareData.gstr3bSummary.sup_details.osup_nongst) {
                    $scope.isupNongstTxval = shareData.gstr3bSummary.sup_details.osup_nongst.txval;
                }

            }

            //table 3.2
            if (shareData.gstr3bSummary.intr_ltfee) {
                if (shareData.gstr3bSummary.intr_ltfee.intr_details) {
                    $scope.intrestIamt = shareData.gstr3bSummary.intr_ltfee.intr_details.iamt;
                }
                if (shareData.gstr3bSummary.intr_ltfee.intr_details) {
                    $scope.intrestCamt = shareData.gstr3bSummary.intr_ltfee.intr_details.camt;
                }
                if (shareData.gstr3bSummary.intr_ltfee.intr_details) {
                    $scope.intrestSamt = shareData.gstr3bSummary.intr_ltfee.intr_details.samt;
                }
                if (shareData.gstr3bSummary.intr_ltfee.intr_details) {
                    $scope.intrestCsamt = shareData.gstr3bSummary.intr_ltfee.intr_details.csamt;
                }
                if (shareData.gstr3bSummary.intr_ltfee.ltfee_details) {
                    $scope.lateFeeCamt = shareData.gstr3bSummary.intr_ltfee.ltfee_details.camt;
                }
                if (shareData.gstr3bSummary.intr_ltfee.ltfee_details) {
                    $scope.lateFeeSamt = shareData.gstr3bSummary.intr_ltfee.ltfee_details.samt;
                }
            }

            //table 4
            if (shareData.gstr3bSummary.inter_sup) {

                angular.forEach(shareData.gstr3bSummary.inter_sup, function (val, key) {

                    if (!val.empty) {
                        if (angular.equals(key, 'unreg_details')) {
                            angular.forEach(val, function (obj) {
                                // angular.forEach(value, function(val, label) {
                                $scope.interSupUnregTotalTax += parseFloat(obj.txval.toString().replace('₹', '') || 0.0);
                                $scope.interSupUnregIntTax += parseFloat(obj.iamt.toString().replace('₹', '') || 0.0);
                            });
                        }
                    }
                });
                angular.forEach(shareData.gstr3bSummary.inter_sup, function (val, key) {

                    if (!val.empty) {
                        if (angular.equals(key, 'comp_details')) {
                            angular.forEach(val, function (obj) {
                                // angular.forEach(value, function(val, label) {
                                $scope.interSupCompTotalTax += parseFloat(obj.txval.toString().replace('₹', '') || 0.0);
                                $scope.interSupCompIntTax += parseFloat(obj.iamt.toString().replace('₹', '') || 0.0);
                            });
                        }
                    }
                });
                angular.forEach(shareData.gstr3bSummary.inter_sup, function (val, key) {

                    if (!val.empty) {
                        if (angular.equals(key, 'uin_details')) {
                            angular.forEach(val, function (obj) {
                                //angular.forEach(value, function(val, label) {
                                $scope.intersupUINTotalTax += parseFloat(obj.txval.toString().replace('₹', '') || 0.0);
                                $scope.intersupUINIntTax += parseFloat(obj.iamt.toString().replace('₹', '') || 0.0);
                            });
                        }
                    }
                });
            }




            //table 5

            if (shareData.gstr3bSummary.itc_elg) {
                angular.forEach(shareData.gstr3bSummary.itc_elg, function (val, key) {
                    if (angular.equals(key, 'itc_avl')) {
                        angular.forEach(val, function (obj) {
                            $scope.avITCIamt += parseFloat(obj.iamt.toString().replace('₹', '') || 0.0);
                            $scope.avITCCamt += parseFloat(obj.camt.toString().replace('₹', '') || 0.0);
                            $scope.avITCSamt += parseFloat(obj.samt.toString().replace('₹', '') || 0.0);
                            $scope.avITCCsamt += parseFloat(obj.csamt.toString().replace('₹', '') || 0.0);
                        });
                    } else if (angular.equals(key, 'itc_rev')) {
                        angular.forEach(val, function (obj) {
                            $scope.revITCIamt += parseFloat(obj.iamt.toString().replace('₹', '') || 0.0);
                            $scope.revITCCamt += parseFloat(obj.camt.toString().replace('₹', '') || 0.0);
                            $scope.revITCSamt += parseFloat(obj.samt.toString().replace('₹', '') || 0.0);
                            $scope.revITCCsamt += parseFloat(obj.csamt.toString().replace('₹', '') || 0.0);
                        });
                    } else if (angular.equals(key, 'itc_inelg')) {
                        angular.forEach(val, function (obj) {
                            $scope.inlgITCIamt += parseFloat(obj.iamt.toString().replace('₹', '') || 0.0);
                            $scope.inlgITCCamt += parseFloat(obj.camt.toString().replace('₹', '') || 0.0);
                            $scope.inlgITCSamt += parseFloat(obj.samt.toString().replace('₹', '') || 0.0);
                            $scope.inlgITCCsamt += parseFloat(obj.csamt.toString().replace('₹', '') || 0.0);
                        });
                    }
                    $scope.netITCIamt = ($scope.avITCIamt - $scope.revITCIamt);
                    $scope.netITCCamt = ($scope.avITCCamt - $scope.revITCCamt);
                    $scope.netITCSamt = ($scope.avITCSamt - $scope.revITCSamt);
                    $scope.netITCCsamt = ($scope.avITCCsamt - $scope.revITCCsamt);



                });
            }
            $scope.insupArrInter = [];
            $scope.insupArrIntra = [];

            if (shareData.gstr3bSummary.inward_sup) {
                angular.forEach(shareData.gstr3bSummary.inward_sup.isup_details, function (obj) {
                    $scope.insupArrInter.push(parseFloat(obj.inter));
                    $scope.insupArrIntra.push(parseFloat(obj.intra));
                });
                $scope.insupCompInter = $scope.insupArrInter[0];
                $scope.insupCompIntra = $scope.insupArrIntra[0];
                $scope.insupNonGstInter = $scope.insupArrInter[1];
                $scope.insupNonGstIntra = $scope.insupArrIntra[1];

            }

            //table 6.1
            if (status != "NF" && shareData.gstr3bSummary && shareData.gstr3bSummary.qn && shareData.gstr3bSummary.qn.q1 === 'Y') {
                $scope.createGstPdf();
            }
            else if (status != "NF") {
                var response = taxPayableData;

                // $().blockPage(true);
                if (response.status == 1 && response.data.status == 2) {
                    $().blockPage(false);
                    $scope.emptyString = null;
                    if (response.data.returnsDbCdredList.tax_pay) {
                        $scope.taxPayableNonRev = response.data.returnsDbCdredList.tax_pay[0];
                        $scope.taxPayableRev = response.data.returnsDbCdredList.tax_pay[1];
                    }
                    if (response.data.returnsDbCdredList.tax_paid.pd_by_cash) {
                        if (response.data.returnsDbCdredList.tax_paid.pd_by_cash[0]) {
                            $scope.taxPaidCashNonRev = response.data.returnsDbCdredList.tax_paid.pd_by_cash[0].trancd === 30002 ? response.data.returnsDbCdredList.tax_paid.pd_by_cash[0] : $scope.emptyString;

                            $scope.taxPaidCashRev = response.data.returnsDbCdredList.tax_paid.pd_by_cash[0].trancd === 30003 ? response.data.returnsDbCdredList.tax_paid.pd_by_cash[0] : $scope.emptyString;
                        }

                        if (response.data.returnsDbCdredList.tax_paid.pd_by_cash[1]) {

                            $scope.taxPaidCashNonRev = response.data.returnsDbCdredList.tax_paid.pd_by_cash[1].trancd === 30002 ? response.data.returnsDbCdredList.tax_paid.pd_by_cash[1] : $scope.emptyString;

                            $scope.taxPaidCashRev = response.data.returnsDbCdredList.tax_paid.pd_by_cash[1].trancd === 30003 ? response.data.returnsDbCdredList.tax_paid.pd_by_cash[1] : $scope.emptyString;
                        }

                        if (response.data.returnsDbCdredList.tax_paid.pd_by_cash[0] && response.data.returnsDbCdredList.tax_paid.pd_by_cash[1]) {

                            $scope.taxPaidCashNonRev = response.data.returnsDbCdredList.tax_paid.pd_by_cash[0].trancd === 30002 ? response.data.returnsDbCdredList.tax_paid.pd_by_cash[0] : response.data.returnsDbCdredList.tax_paid.pd_by_cash[1];

                            $scope.taxPaidCashRev = response.data.returnsDbCdredList.tax_paid.pd_by_cash[0].trancd === 30003 ? response.data.returnsDbCdredList.tax_paid.pd_by_cash[0] : response.data.returnsDbCdredList.tax_paid.pd_by_cash[1];
                        }
                    }
                    if (Object.keys(response.data.returnsDbCdredList.tax_paid).length > 0 && response.data.returnsDbCdredList.tax_paid.pd_by_itc) {
                        $scope.taxPaidItc = response.data.returnsDbCdredList.tax_paid.pd_by_itc && response.data.returnsDbCdredList.tax_paid.pd_by_itc[0] ? response.data.returnsDbCdredList.tax_paid.pd_by_itc[0] : 0;
                        $scope.taxPaidItcIgst_Igst_amt = response.data.returnsDbCdredList.tax_paid.pd_by_itc[0] && response.data.returnsDbCdredList.tax_paid.pd_by_itc[0].igst_igst_amt ? response.data.returnsDbCdredList.tax_paid.pd_by_itc[0].igst_igst_amt : 0;
                        $scope.taxPaidItcIgst_Cgst_amt = response.data.returnsDbCdredList.tax_paid.pd_by_itc[0] && response.data.returnsDbCdredList.tax_paid.pd_by_itc[0].igst_cgst_amt ? response.data.returnsDbCdredList.tax_paid.pd_by_itc[0].igst_cgst_amt : 0;
                        $scope.taxPaidItcIgst_Sgst_amt = response.data.returnsDbCdredList.tax_paid.pd_by_itc[0] && response.data.returnsDbCdredList.tax_paid.pd_by_itc[0].igst_sgst_amt ? response.data.returnsDbCdredList.tax_paid.pd_by_itc[0].igst_sgst_amt : 0;

                        $scope.taxPaidItcCgst_Igst_amt = response.data.returnsDbCdredList.tax_paid.pd_by_itc[0] && response.data.returnsDbCdredList.tax_paid.pd_by_itc[0].cgst_igst_amt ? response.data.returnsDbCdredList.tax_paid.pd_by_itc[0].cgst_igst_amt : 0;
                        $scope.taxPaidItcCgst_Cgst_amt = response.data.returnsDbCdredList.tax_paid.pd_by_itc[0] && response.data.returnsDbCdredList.tax_paid.pd_by_itc[0].cgst_cgst_amt ? response.data.returnsDbCdredList.tax_paid.pd_by_itc[0].cgst_cgst_amt : 0;

                        $scope.taxPaidItcSgst_Igst_amt = response.data.returnsDbCdredList.tax_paid.pd_by_itc[0] && response.data.returnsDbCdredList.tax_paid.pd_by_itc[0].sgst_igst_amt ? response.data.returnsDbCdredList.tax_paid.pd_by_itc[0].sgst_igst_amt : 0;
                        $scope.taxPaidItcSgst_Sgst_amt = response.data.returnsDbCdredList.tax_paid.pd_by_itc[0] && response.data.returnsDbCdredList.tax_paid.pd_by_itc[0].sgst_sgst_amt ? response.data.returnsDbCdredList.tax_paid.pd_by_itc[0].sgst_sgst_amt : 0;

                        $scope.taxPaidItcCess_Cess_amt = response.data.returnsDbCdredList.tax_paid.pd_by_itc[0] && response.data.returnsDbCdredList.tax_paid.pd_by_itc[0].cess_cess_amt ? response.data.returnsDbCdredList.tax_paid.pd_by_itc[0].cess_cess_amt : 0;
                    }
                    if ($scope.taxPaidCashNonRev != null) {
                        $scope.taxPaidCashNonRevigsttx = $scope.taxPaidCashNonRev.igst.tx;
                    } else {
                        $scope.taxPaidCashNonRevigsttx = 0.0;
                    }
                    if ($scope.taxPaidCashNonRev != null) {
                        $scope.taxPaidCashNonRevigstintr = $scope.taxPaidCashNonRev.igst.intr;
                    } else {
                        $scope.taxPaidCashNonRevigstintr = 0.0;
                    }

                    if ($scope.taxPaidCashNonRev != null) {
                        $scope.taxPaidCashNonRevcgsttx = $scope.taxPaidCashNonRev.cgst.tx;
                    } else {
                        $scope.taxPaidCashNonRevcgsttx = 0.0;
                    }
                    if ($scope.taxPaidCashNonRev != null) {
                        $scope.taxPaidCashNonRevcgstintr = $scope.taxPaidCashNonRev.cgst.intr;
                    } else {
                        $scope.taxPaidCashNonRevcgstintr = 0.0;
                    }
                    if ($scope.taxPaidCashNonRev != null) {
                        $scope.taxPaidCashNonRevcgstfee = $scope.taxPaidCashNonRev.cgst.fee;
                    } else {
                        $scope.taxPaidCashNonRevcgstfee = 0.0;
                    }

                    if ($scope.taxPaidCashNonRev != null) {
                        $scope.taxPaidCashNonRevsgsttx = $scope.taxPaidCashNonRev.sgst.tx;
                    } else {
                        $scope.taxPaidCashNonRevsgsttx = 0.0;
                    }
                    if ($scope.taxPaidCashNonRev != null) {
                        $scope.taxPaidCashNonRevsgstintr = $scope.taxPaidCashNonRev.sgst.intr;
                    } else {
                        $scope.taxPaidCashNonRevsgstintr = 0.0;
                    }
                    if ($scope.taxPaidCashNonRev != null) {
                        $scope.taxPaidCashNonRevsgstfee = $scope.taxPaidCashNonRev.sgst.fee;
                    } else {
                        $scope.taxPaidCashNonRevsgstfee = 0.0;
                    }

                    if ($scope.taxPaidCashNonRev != null) {
                        $scope.taxPaidCashNonRevcesstx = $scope.taxPaidCashNonRev.cess.tx;
                    } else {
                        $scope.taxPaidCashNonRevcesstx = 0.0;
                    }
                    if ($scope.taxPaidCashNonRev != null) {
                        $scope.taxPaidCashNonRevcessintr = $scope.taxPaidCashNonRev.cess.intr;
                    } else {
                        $scope.taxPaidCashNonRevcessintr = 0.0;
                    }
                    if ($scope.taxPaidCashRev != null) {
                        $scope.taxPaidCashRevigsttx = $scope.taxPaidCashRev.igst.tx;
                    } else {
                        $scope.taxPaidCashRevigsttx = 0.0;
                    }

                    if ($scope.taxPaidCashRev != null) {
                        $scope.taxPaidCashRevcgsttx = $scope.taxPaidCashRev.cgst.tx;
                    } else {
                        $scope.taxPaidCashRevcgsttx = 0.0;
                    }
                    if ($scope.taxPaidCashRev != null) {
                        $scope.taxPaidCashRevsgsttx = $scope.taxPaidCashRev.sgst.tx;
                    } else {
                        $scope.taxPaidCashRevsgsttx = 0.0;
                    }
                    if ($scope.taxPaidCashRev != null) {
                        $scope.taxPaidCashRevcesstx = $scope.taxPaidCashRev.cess.tx;
                    } else {
                        $scope.taxPaidCashRevcesstx = 0.0;
                    }
                    $scope.createGstPdf();
                } else {
                    //  $().blockPage(false);
                    $scope.createGstPdf();
                    $scope.noLiab = true;
                }
            } else if (status === "NF") {

                if (shareData.gstr3bSummary.sup_details && shareData.gstr3bSummary.sup_details.osup_det) {
                    $scope.othRev_iamt = (shareData.gstr3bSummary.sup_details.osup_det.iamt ? shareData.gstr3bSummary.sup_details.osup_det.iamt : 0) + (shareData.gstr3bSummary.sup_details.osup_zero.iamt ? shareData.gstr3bSummary.sup_details.osup_zero.iamt : 0);
                    $scope.othRev_camt = (shareData.gstr3bSummary.sup_details.osup_det.camt ? shareData.gstr3bSummary.sup_details.osup_det.camt : 0) + (shareData.gstr3bSummary.sup_details.osup_zero.camt ? shareData.gstr3bSummary.sup_details.osup_zero.camt : 0);
                    $scope.othRev_samt = (shareData.gstr3bSummary.sup_details.osup_det.samt ? shareData.gstr3bSummary.sup_details.osup_det.samt : 0) + (shareData.gstr3bSummary.sup_details.osup_zero.samt ? shareData.gstr3bSummary.sup_details.osup_zero.samt : 0);
                    $scope.othRev_csamt = (shareData.gstr3bSummary.sup_details.osup_det.csamt ? shareData.gstr3bSummary.sup_details.osup_det.csamt : 0) + (shareData.gstr3bSummary.sup_details.osup_zero.csamt ? shareData.gstr3bSummary.sup_details.osup_zero.csamt : 0);
                }
                if (shareData.gstr3bSummary.itc_elg && shareData.gstr3bSummary.itc_elg.itc_net) {
                    if (shareData.gstr3bSummary.itc_elg.itc_net.iamt && shareData.gstr3bSummary.itc_elg.itc_net.iamt < 0) {
                        $scope.othRev_iamt = ($scope.othRev_iamt - (shareData.gstr3bSummary.itc_elg.itc_net.iamt));
                    }
                    if (shareData.gstr3bSummary.itc_elg.itc_net.camt && shareData.gstr3bSummary.itc_elg.itc_net.camt < 0) {
                        $scope.othRev_camt = ($scope.othRev_camt - (shareData.gstr3bSummary.itc_elg.itc_net.camt));
                    }
                    if (shareData.gstr3bSummary.itc_elg.itc_net.samt && shareData.gstr3bSummary.itc_elg.itc_net.samt < 0) {
                        $scope.othRev_samt = ($scope.othRev_samt - (shareData.gstr3bSummary.itc_elg.itc_net.samt));
                    }
                    if (shareData.gstr3bSummary.itc_elg.itc_net.csamt && shareData.gstr3bSummary.itc_elg.itc_net.csamt < 0) {
                        $scope.othRev_csamt = ($scope.othRev_csamt - (shareData.gstr3bSummary.itc_elg.itc_net.samt));
                    }
                }


                if (shareData.gstr3bSummary.sup_details && shareData.gstr3bSummary.sup_details.isup_rev) {
                    $scope.revrs_iamt = (shareData.gstr3bSummary.sup_details.isup_rev.iamt ? shareData.gstr3bSummary.sup_details.isup_rev.iamt : 0.0);
                    $scope.revrs_camt = (shareData.gstr3bSummary.sup_details.isup_rev.camt ? shareData.gstr3bSummary.sup_details.isup_rev.camt : 0.0);
                    $scope.revrs_samt = (shareData.gstr3bSummary.sup_details.isup_rev.samt ? shareData.gstr3bSummary.sup_details.isup_rev.samt : 0.0);
                    $scope.revrs_csamt = (shareData.gstr3bSummary.sup_details.isup_rev.csamt ? shareData.gstr3bSummary.sup_details.isup_rev.csamt : 0.0);
                }
                $scope.createGstPdf();
                $scope.noLiab = true;
            }
            // #endregion
        }

        $scope.createGstPdf = function () {
            var pdfname = 'GSTR3B_' + shareData.gstin + '_' + shareData.rtn_prd + ".pdf";
            var text = "  DRAFT ";
            if ($scope.filing === "FIL") {
                text = "  FINAL ";
            }

            var dd = {
                pageSize: 'A4',
                pageOrientation: 'landscape',
                pageMargin: [40, 60, 40, 60],
                watermark: {
                    text: text,
                    color: 'black',
                    opacity: 0.3,
                    bold: true,
                    italics: false
                },
                content: [
                    {
                        text: 'Form GSTR-3B',
                        style: 'header'
                    },
                    {
                        text: '[See rule 61(5)]',
                        style: 'center'
                    },

                    {
                        style: 'retprd',
                        table: {
                            widths: ['30%', 'auto'],
                            body: [
                                ['Year', $scope.finyr],
                                ['Month', $scope.retprd],

                            ]
                        }
                    },
                    {
                        style: 'tableExample',
                        table: {
                            widths: ['65%', 'auto'],
                            body: [
                                ['1. GSTIN', shareData.gstin || '-'],
                                ['2. Legal name of the registered person', $scope.bus_name || '-'],
                            ]
                        }
                    },
                    {
                        text: '3.1 Tax on outward and reverse charge inward supplies',
                        style: 'subheader'
                    },

                    {
                        style: 'tableExample',
                        table: {
                            body: [
                                [
                                    {
                                        text: 'Nature of Supplies',
                                        bold: true
                                    },
                                    {
                                        text: 'Total Taxable value',
                                        bold: true
                                    },
                                    {
                                        text: 'Integrated Tax',
                                        bold: true
                                    },
                                    {
                                        text: 'Central Tax',
                                        bold: true
                                    },
                                    {
                                        text: 'State/UT Tax',
                                        bold: true
                                    },
                                    {
                                        text: 'Cess',
                                        bold: true
                                    }
                                ],
                                [
                                    '(a) Outward taxable supplies (other than zero rated, nil rated and exempted)', {
                                        text: parseFloat($scope.osupTaxvl).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.osupIamt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.osupCamt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.osupSamt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.osupCsamt).toFixed(2),
                                        alignment: 'right'
                                    }
                                ],

                                [
                                    '(b) Outward taxable supplies (zero rated)',
                                    {
                                        text: parseFloat($scope.osupZeroRatedTxval).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.osupZeroRatedIamt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: parseFloat($scope.osupZeroRatedCsamt).toFixed(2),
                                        alignment: 'right'
                                    },
                                ],

                                [
                                    '(c) Other outward supplies (Nil rated, exempted)',
                                    {
                                        text: parseFloat($scope.osupNilTxval).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    }
                                ],
                                [
                                    '(d) Inward supplies (liable to reverse charge)',
                                    {
                                        text: parseFloat($scope.isupRevTxval).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.isupRevIamt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.isupRevCamt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.isupRevSamt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.isupRevCsamt).toFixed(2),
                                        alignment: 'right'
                                    }
                                ],
                                [
                                    '(e) Non-GST outward supplies',
                                    {
                                        text: parseFloat($scope.isupNongstTxval).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    }
                                ]
                            ]
                        }
                    }, {
                        text: '3.2 Inter-state supplies',
                        style: 'subheader'
                    },

                    {
                        style: 'tableExample',
                        table: {
                            body: [
                                [
                                    {
                                        text: 'Nature of Supplies',
                                        bold: true
                                    },
                                    {
                                        text: 'Total Taxable value',
                                        bold: true
                                    },
                                    {
                                        text: 'Integrated Tax',
                                        bold: true
                                    }
                                ],
                                [
                                    'Supplies made to Unregistered Persons',
                                    {
                                        text: parseFloat($scope.interSupUnregTotalTax).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.interSupUnregIntTax).toFixed(2),
                                        alignment: 'right'
                                    }
                                ],
                                [
                                    'Supplies made to Composition Taxable Persons',
                                    {
                                        text: parseFloat($scope.interSupCompTotalTax).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.interSupCompIntTax).toFixed(2),
                                        alignment: 'right'
                                    }
                                ],
                                [
                                    'Supplies made to UIN holders',
                                    {
                                        text: parseFloat($scope.intersupUINTotalTax).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.intersupUINIntTax).toFixed(2),
                                        alignment: 'right'
                                    }
                                ]
                            ]
                        }
                    }, {
                        text: '4. Eligible ITC',
                        style: 'subheader'
                    },

                    {
                        style: 'tableITC',
                        table: {
                            body: [
                                [
                                    {
                                        text: 'Details',
                                        bold: true
                                    },
                                    {
                                        text: 'Integrated Tax',
                                        bold: true
                                    },
                                    {
                                        text: 'Central Tax',
                                        bold: true
                                    },
                                    {
                                        text: 'State/UT Tax',
                                        bold: true
                                    },
                                    {
                                        text: 'Cess',
                                        bold: true
                                    }
                                ],
                                [
                                    '(A) ITC Available',
                                    {
                                        text: parseFloat($scope.avITCIamt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.avITCCamt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.avITCSamt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.avITCCsamt).toFixed(2),
                                        alignment: 'right'
                                    }
                                ],
                                [
                                    '(B) ITC Reversed',
                                    {
                                        text: parseFloat($scope.revITCIamt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.revITCCamt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.revITCSamt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.revITCCsamt).toFixed(2),
                                        alignment: 'right'
                                    }
                                ],
                                [
                                    '(C) Net ITC Available (A) – (B)',
                                    {
                                        text: parseFloat($scope.netITCIamt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.netITCCamt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.netITCSamt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.netITCCsamt).toFixed(2),
                                        alignment: 'right'
                                    }
                                ],
                                [
                                    '(D) Ineligible ITC',
                                    {
                                        text: parseFloat($scope.inlgITCIamt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.inlgITCCamt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.inlgITCSamt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.inlgITCCsamt).toFixed(2),
                                        alignment: 'right'
                                    }
                                ]
                            ],
                            lineHeight: 3
                        }
                    }, {
                        text: '5. Exempt, nil and Non GST inward supplies',
                        style: 'subheader'
                    },

                    {
                        style: 'tableExample',
                        table: {
                            body: [
                                [
                                    {
                                        text: 'Nature of Supplies',
                                        bold: true
                                    },
                                    {
                                        text: 'Inter-state supplies',
                                        bold: true
                                    },
                                    {
                                        text: 'Intra-state supplies',
                                        bold: true
                                    }
                                ],
                                [
                                    'From a supplier under composition scheme, Exempt and Nil rated supply',
                                    {
                                        text: parseFloat($scope.insupCompInter).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.insupCompIntra).toFixed(2),
                                        alignment: 'right'
                                    }
                                ],
                                [
                                    'Non-GST supply',
                                    {
                                        text: parseFloat($scope.insupNonGstInter).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.insupNonGstIntra).toFixed(2),
                                        alignment: 'right'
                                    }
                                ]

                            ]
                        }
                    }, {
                        text: '5.1 Interest and Late fee',
                        style: 'subheader'
                    },

                    {
                        style: 'tableExample',
                        table: {
                            body: [
                                [
                                    {
                                        text: 'Details',
                                        bold: true
                                    },
                                    {
                                        text: 'Integrated Tax',
                                        bold: true
                                    },
                                    {
                                        text: 'Central Tax',
                                        bold: true
                                    },
                                    {
                                        text: 'State/UT Tax',
                                        bold: true
                                    },
                                    {
                                        text: 'Cess',
                                        bold: true
                                    }
                                ],
                                [
                                    'Interest',
                                    {
                                        text: parseFloat($scope.intrestIamt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.intrestCamt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.intrestSamt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.intrestCsamt).toFixed(2),
                                        alignment: 'right'
                                    }
                                ],
                                [
                                    'Late fee',
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: parseFloat($scope.lateFeeCamt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.lateFeeSamt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    }
                                ]
                            ]
                        },
                        pageBreak: 'after'
                    }, {
                        text: '6.1 Payment of tax',
                        style: 'subheader'
                    },

                    {
                        style: 'tableExample',
                        table: {
                            body: [
                                [
                                    {
                                        text: 'Description',
                                        rowSpan: 2,
                                        bold: true
                                    },
                                    {
                                        text: 'Total tax payable',
                                        rowSpan: 2,
                                        bold: true
                                    },
                                    {
                                        text: 'Tax paid through ITC',
                                        style: 'tableHeader',
                                        colSpan: 4,
                                        alignment: 'center'
                                    },
                                    {},
                                    {},
                                    {},
                                    {
                                        text: 'Tax/Cess paid in cash',
                                        rowSpan: 2,
                                        bold: true
                                    },
                                    {
                                        text: 'Interest paid in cash',
                                        rowSpan: 2,
                                        bold: true
                                    },
                                    {
                                        text: 'Late fee paid in cash',
                                        rowSpan: 2,
                                        bold: true
                                    }
                                ],

                                [
                                    'Description',
                                    'Total tax payable',
                                    'Integrated Tax',
                                    'Central Tax',
                                    'State/UT Tax',
                                    'Cess',
                                    'Tax/Cess paid in cash',
                                    'Interest paid in cash',
                                    'Late fee paid in cash'
                                ],
                                [
                                    {
                                        text: '(A) Other than reverse charge',
                                        style: 'tableHeader',
                                        colSpan: 9,
                                        alignment: 'left'
                                    },
                                    {},
                                    {},
                                    {},
                                    {},
                                    {},
                                    {},
                                    {},
                                    {}
                                ],
                                [
                                    'Integrated Tax',
                                    {
                                        text: parseFloat($scope.othRev_iamt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.taxPaidItcIgst_Igst_amt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.taxPaidItcIgst_Cgst_amt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.taxPaidItcIgst_Sgst_amt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: parseFloat($scope.taxPaidCashNonRevigsttx).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.taxPaidCashNonRevigstintr).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    }
                                ],
                                [
                                    'Central Tax',
                                    {
                                        text: parseFloat($scope.othRev_camt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.taxPaidItcCgst_Igst_amt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.taxPaidItcCgst_Cgst_amt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: parseFloat($scope.taxPaidCashNonRevcgsttx).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.taxPaidCashNonRevcgstintr).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.taxPaidCashNonRevcgstfee).toFixed(2),
                                        alignment: 'right'
                                    }
                                ],
                                [
                                    'State/UT Tax',
                                    {
                                        text: parseFloat($scope.othRev_samt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.taxPaidItcSgst_Igst_amt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: parseFloat($scope.taxPaidItcSgst_Sgst_amt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: parseFloat($scope.taxPaidCashNonRevsgsttx).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.taxPaidCashNonRevsgstintr).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.taxPaidCashNonRevsgstfee).toFixed(2),
                                        alignment: 'right'
                                    }
                                ],
                                [
                                    'Cess',
                                    {
                                        text: parseFloat($scope.othRev_csamt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: parseFloat($scope.taxPaidItcCess_Cess_amt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.taxPaidCashNonRevcesstx).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: parseFloat($scope.taxPaidCashNonRevcessintr).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    }
                                ],
                                [
                                    {
                                        text: '(B) Reverse charge',
                                        style: 'tableHeader',
                                        colSpan: 9,
                                        alignment: 'left'
                                    },
                                    {},
                                    {},
                                    {},
                                    {},
                                    {},
                                    {},
                                    {},
                                    {}
                                ],
                                [
                                    'Integrated Tax',
                                    {
                                        text: parseFloat($scope.revrs_iamt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: parseFloat($scope.taxPaidCashRevigsttx).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    }
                                ],
                                [
                                    'Central Tax',
                                    {
                                        text: parseFloat($scope.revrs_camt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: parseFloat($scope.taxPaidCashRevcgsttx).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    }
                                ],
                                [
                                    'State/UT Tax',
                                    {
                                        text: parseFloat($scope.revrs_samt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: parseFloat($scope.taxPaidCashRevsgsttx).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    }
                                ],
                                [
                                    'Cess',
                                    {
                                        text: parseFloat($scope.revrs_csamt).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: parseFloat($scope.taxPaidCashRevcesstx).toFixed(2),
                                        alignment: 'right'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    },
                                    {
                                        text: '-',
                                        alignment: 'center'
                                    }
                                ]
                            ]
                        }
                    }, {
                        text: '6.2. TDS/TCS Credit',
                        style: 'subheader'
                    },

                    {
                        style: 'tableExample',
                        table: {
                            body: [
                                [
                                    {
                                        text: 'Details',
                                        bold: true
                                    },
                                    {
                                        text: 'Integrated Tax',
                                        bold: true
                                    },
                                    {
                                        text: 'Central Tax',
                                        bold: true
                                    },
                                    {
                                        text: 'State/UT Tax',
                                        bold: true
                                    }
                                ],
                                [
                                    'TDS',
                                    {
                                        text: '0',
                                        alignment: 'right'
                                    },
                                    {
                                        text: '0',
                                        alignment: 'right'
                                    },
                                    {
                                        text: '0',
                                        alignment: 'right'
                                    }
                                ],
                                [
                                    'TCS',
                                    {
                                        text: '0',
                                        alignment: 'right'
                                    },
                                    {
                                        text: '0',
                                        alignment: 'right'
                                    },
                                    {
                                        text: '0',
                                        alignment: 'right'
                                    }
                                ]
                            ]
                        }
                    }
                ],
                styles: {
                    header: {
                        fontSize: 18,
                        bold: true,
                        margin: [300, 0, 0, 10]
                    },
                    subheader: {
                        fontSize: 16,
                        bold: true,
                        margin: [0, 10, 0, 5]
                    },
                    tableExample: {
                        margin: [0, 5, 0, 15]
                    },
                    tableITC: {
                        margin: [0, 5, 0, 50]
                    },
                    retprd: {
                        margin: [470, 0, 0, 10]
                    },
                    center: {
                        margin: [320, 0, 0, 10]
                    },
                    tableHeader: {
                        bold: true,
                        fontSize: 13,
                        color: 'black'
                    },
                    rule: {
                        margin: [315, 0, 0, 10]
                    }
                }

            };

            // Instead of downloaing file, write file to console as base64 so we can get it from our headless browser.
            // NOTE: Make sure to remove 'pdfMake.createPdf(dd).download(pdfname);' line.
            pdfMake.createPdf(dd).getBase64((data) => {
                console.log("PDF:" + pdfname + ":" + data);
            });
        };
        // #endregion
    </script>
</head>
</html>